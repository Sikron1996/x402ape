<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>x402ape</title>
  <style>
    body {
      font-family: "Press Start 2P", monospace;
      background-color: #0b0f19;
      color: #00ff99;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .runner {
      display: flex;
      justify-content: center;
      gap: 40px;
      overflow: hidden;
      margin-top: 20px;
      animation: slide 10s linear infinite;
    }
    .runner img {
      width: 80px;
      height: 80px;
      image-rendering: pixelated;
    }
    @keyframes slide {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    .card {
      border: 2px solid #00ff99;
      border-radius: 10px;
      width: 500px;
      margin: 50px auto;
      padding: 20px;
    }
    button {
      font-family: "Press Start 2P", monospace;
      color: #00ff99;
      background: transparent;
      border: 2px solid #00ff99;
      border-radius: 8px;
      padding: 10px;
      margin: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #00ff99;
      color: #0b0f19;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <div class="runner">
    <img src="IMG_0880.png">
    <img src="IMG_0881.png">
    <img src="IMG_0882.png">
    <img src="IMG_0883.png">
    <img src="IMG_0880.png">
    <img src="IMG_0881.png">
  </div>

  <div class="card">
    <h2>x402ape</h2>
    <p>Pay for the service: <b>1 USDC</b> (Base network)<br>
    Compatible with <a href="https://x402scan.com" target="_blank" style="color:#00ff99;">x402scan</a></p>

    <button onclick="payMetaMask()">Pay 1 USDC (MetaMask)</button>
    <button onclick="payWalletConnect()">Pay 1 USDC (WalletConnect)</button>

    <p id="status">Ready to connect...</p>
  </div>

  <!-- Wallet SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@web3modal/html@3.5.3/dist/index.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.11.0/dist/ethers.umd.min.js"></script>
  <script>
    const WC_PROJECT_ID = "63bd4633378dbc52c202e15313227c54";
    const USDC_ADDRESS = "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"; // Base USDC
    const PAY_TO = "0x115ac3db6f4785d6b7ae7eea3a03fb0fb0bc9d5191f81546..."; // твоя адреса одержувача
    const STATUS = document.getElementById("status");

    async function payMetaMask() {
      try {
        STATUS.textContent = "Connecting MetaMask...";
        const provider = new ethers.BrowserProvider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        const signer = await provider.getSigner();
        const contract = new ethers.Contract(
          USDC_ADDRESS,
          ["function transfer(address to, uint256 amount) returns (bool)"],
          signer
        );
        const tx = await contract.transfer(PAY_TO, ethers.parseUnits("1.0", 6));
        STATUS.innerHTML = `✅ Payment sent! <a href="https://basescan.org/tx/${tx.hash}" target="_blank">View on BaseScan</a>`;
      } catch (err) {
        STATUS.textContent = "❌ " + err.message;
      }
    }

    async function payWalletConnect() {
      try {
        STATUS.textContent = "Loading WalletConnect...";
        const modal = new window.Web3ModalHTML.Web3Modal({
          projectId: WC_PROJECT_ID,
          themeMode: "dark",
          walletConnectVersion: 2,
          chains: [{ id: 8453, name: "Base", rpcUrl: "https://mainnet.base.org" }]
        });
        const session = await modal.openModal();
        console.log("WalletConnect session:", session);
        STATUS.textContent = "✅ Connected via WalletConnect!";
      } catch (err) {
        console.error(err);
        STATUS.textContent = "❌ Failed to load WalletConnect: " + err.message;
      }
    }
  </script>
</body>
</html>
